From 490f896f355b3a7c90b449978d4d60fa0d301f8e Mon Sep 17 00:00:00 2001
From: Viktor Hofer <viktor.hofer@microsoft.com>
Date: Tue, 29 Oct 2024 10:07:21 +0000
Subject: [PATCH] Forward NetCoreAppToolCurrentVersion switch

Backport: https://github.com/dotnet/runtime/pull/109331

---
 eng/DotNetBuild.props | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/eng/DotNetBuild.props b/eng/DotNetBuild.props
index 0a75f2938..4b46ce846 100644
--- a/eng/DotNetBuild.props
+++ b/eng/DotNetBuild.props
@@ -70,6 +70,8 @@
       <InnerBuildArgs Condition="'$(DotNetBuildMonoAOTEnableLLVM)' != ''">$(InnerBuildArgs) /p:MonoAOTEnableLLVM=$(DotNetBuildMonoAOTEnableLLVM)</InnerBuildArgs>
       <InnerBuildArgs Condition="'$(DotNetBuildMonoBundleLLVMOptimizer)' != ''">$(InnerBuildArgs) /p:MonoBundleLLVMOptimizer=$(DotNetBuildMonoBundleLLVMOptimizer)</InnerBuildArgs>
       <InnerBuildArgs Condition="'$(PgoInstrument)' == 'true'">$(InnerBuildArgs) $(FlagParameterPrefix)pgoinstrument</InnerBuildArgs>
+      <!-- Needed until https://github.com/dotnet/runtime/issues/109329 is fixed. -->
+      <InnerBuildArgs Condition="'$(NetCoreAppToolCurrentVersion)' != ''">$(InnerBuildArgs) /p:NetCoreAppToolCurrentVersion=$(NetCoreAppToolCurrentVersion)</InnerBuildArgs>
 
       <!-- This prop needs to be passed to the inner build manually as the BaseInnerSourceBuildCommand gets overridden above -->
       <InnerBuildArgs Condition="'$(DotNetBuildRepo)' == 'true'">$(InnerBuildArgs) /p:DotNetBuildRepo=true</InnerBuildArgs>
